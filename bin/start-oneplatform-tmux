#!/usr/bin/env bash

tmux new-session -s 'oneplatform' -n discovery -d 
tmux new-window -t oneplatform:0 -n discovery 
tmux send-keys -t oneplatform:0 'oneplatform-cloud-discovery' Enter
tmux new-window -t oneplatform:1 -n config 
tmux send-keys -t oneplatform:1 'sleep 2; oneplatform-cloud-config' C-m
tmux new-window -t oneplatform:2 -n apigateway 
tmux send-keys -t oneplatform:2 'netstat -tupln | grep 8762; RESULT=$?; while [[ "$RESULT" != "0" ]]; do netstat -tupln | grep 8762; RESULT=$?; sleep 5; done; sleep 15; oneplatform-cloud-apigateway' C-m
tmux new-window -t oneplatform:3 -n uaa 
tmux send-keys -t oneplatform:3 'netstat -tupln | grep 8762; RESULT=$?; while [[ "$RESULT" != "0" ]]; do netstat -tupln | grep 8762; RESULT=$?; sleep 5; done; sleep 15; paysafe-ss-uaa' C-m
tmux attach-session -t oneplatform
