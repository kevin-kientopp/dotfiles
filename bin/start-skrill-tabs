#!/usr/bin/env bash

gnome-terminal \
  --tab -e "bash -x -c '/clientdata/active/nginx/sbin/nginx -s quit; /clientdata/active/nginx/sbin/nginx && cd /clientdata/runtime/apifest-skeleton/apifest && java -Xms1024m -Xmx1024m -Dlog4j.configuration=/clientdata/git/skrill/apifest/apifest/src/main/resources/log4j.xml -Dproperties.file=/clientdata/git/skrill/apifest/apifest/src/main/resources/apifest.properties -Dcustom-policies.properties.file=/clientdata/git/skrill/custom-policies/src/main/resources/custom-policies.properties -jar apifest.jar; exec bash -i'" \
  --tab-with-profile=Unnamed -e "bash -x -c 'cd /clientdata/runtime/apifest-skeleton/oauth20 && java -Doracle.coherence.home= -Dtangosol.coherence.edition=EE -Dtangosol.coherence.mode=prod -Dtangosol.coherence.management.extendedmbeanname=true -Dtangosol.coherence.management=all -Dtangosol.coherence.management.remote=true -Dtangosol.coherence.member=localhost -Dtangosol.coherence.override=/clientdata/runtime/apifest-skeleton/oauth20/coherence-config/tangosol-coherence-override.xml -Doracle.coherence.machine=localhost -Dlog4j.configuration=/clientdata/git/skrill/apifest-oauth20/apifest-oauth20/src/main/resources/log4j.xml -Dcustom-auth.properties.file=/clientdata/git/skrill/custom-auth/src/main/resources/custom-auth.properties -Dproperties.file=/clientdata/git/skrill/apifest-oauth20/apifest-oauth20/src/main/resources/apifest-oauth.properties -cp /clientdata/runtime/apifest-skeleton/oauth20/apifest-oauth20.jar com.apifest.oauth20.OAuthServer; exec bash -i'" \
  --tab-with-profile=Unnamed -e $'bash -x -c \'netstat -tupln | grep 5656; RESULT=$?; while [[ "$RESULT" != "0" ]]; do netstat -tupln | grep 5656; RESULT=$?; sleep 5; done; cd /clientdata/runtime/apifest-skeleton && ./create_app.sh && /clientdata/git/skrill/jboss-eap-6.4/bin/standalone.sh; exec bash -i\''
